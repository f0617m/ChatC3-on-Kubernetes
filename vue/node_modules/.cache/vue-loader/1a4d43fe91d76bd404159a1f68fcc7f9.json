{"remainingRequest":"/home/centos/rails_v5.2.3/ChatC3/chat-c3/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/centos/rails_v5.2.3/ChatC3/chat-c3/src/components/Draw.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/home/centos/rails_v5.2.3/ChatC3/chat-c3/src/components/Draw.vue","mtime":1583161571771},{"path":"/home/centos/rails_v5.2.3/ChatC3/chat-c3/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/home/centos/rails_v5.2.3/ChatC3/chat-c3/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/centos/rails_v5.2.3/ChatC3/chat-c3/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/centos/rails_v5.2.3/ChatC3/chat-c3/node_modules/vuetify-loader/lib/loader.js","mtime":1564062719000},{"path":"/home/centos/rails_v5.2.3/ChatC3/chat-c3/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/centos/rails_v5.2.3/ChatC3/chat-c3/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.draw-board{\r\n  overflow-y: auto;\r\n},\r\n#paper {\r\n  background-color: yellow;\r\n  margin-bottom: 1em;\r\n}\r\n.options-container{\r\n  display: flex;\r\n  position: relative;\r\n  margin: 2em;\r\n  padding: 1.2em 1em 1em;\r\n  width: 600px;\r\n  background-color: #fff; /*BOX背景色 */\r\n  border: 2px solid #8d93c8; /* 枠線の太さ・色 */\r\n  box-shadow: 2px 2px 2px #ccc; /* 影の色 */\r\n}\r\n.title-tab{\r\n  position: absolute;\r\n  display: inline-block;\r\n  top: -28px; /*タブ調整 */\r\n  left: -2px; /*タブ調整 */\r\n  padding: 1px 10px;\r\n  height: 26px;\r\n  font-weight: bold;\r\n  color: #fff; /* タイトル色 */\r\n  background-color: #8d93c8; /* タイトル背景色 */\r\n  border-radius: 8px 8px 0 0;\r\n}\r\n.color-picker{\r\n  margin: 0em 2.5em;\r\n}\r\n.right-options{\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n.size-text{\r\n  display: inline-block;\r\n  font-weight: bold;\r\n  color: #000; /* タイトル色 */\r\n}\r\n.small-circle{\r\n  width: 3px;\r\n  height: 3px;\r\n  border-radius: 50%;\r\n  background: black;\r\n}\r\n.medium-circle{\r\n  width: 5px;\r\n  height: 5px;\r\n  border-radius: 50%;\r\n  background: black;\r\n}\r\n.large-circle{\r\n  width: 10px;\r\n  height: 10px;\r\n  border-radius: 50%;\r\n  background: black;\r\n}\r\n",{"version":3,"sources":["Draw.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Draw.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"draw-board\">\r\n\r\n    <div class=\"canvas-container\">\r\n      <canvas id=\"paper\" :width=\"canvasWidth\" :height=\"canvasHeight\" style =\"border: 2px black solid; background-color:#FFFFFF\"\r\n        v-on:mousedown=\"start\" v-on:touchstart=\"start\" v-on:mouseup=\"leave\"\r\n        v-on:touchend=\"leave\" v-on:mousemove=\"move\" v-on:touchmove=\"move\">\r\n      </canvas>\r\n    </div>\r\n\r\n    <div class=\"options-container\"><span class=\"title-tab\">ペイントツール</span>\r\n      <v-color-picker\r\n        mode=\"rgba\"\r\n        class=\"color-picker\"\r\n        v-model=\"pencilColor\"\r\n        canvas-height=\"100\"\r\n        dot-size=\"5\"\r\n        hide-mode-switch\r\n        width=\"250\"\r\n      >\r\n      </v-color-picker>\r\n\r\n      <div class=\"right-options\">\r\n\r\n        <div class=\"size-text\">ペン/消しゴム</div>\r\n        <v-btn-toggle v-model=\"togglePencil\" mandatory>\r\n          <v-btn>\r\n            <v-icon>mdi-lead-pencil</v-icon>\r\n          </v-btn>\r\n          <v-btn>\r\n            <v-icon>mdi-eraser</v-icon>\r\n          </v-btn>\r\n        </v-btn-toggle>\r\n\r\n        <div class=\"size-text\">太さ</div>\r\n        <v-btn-toggle v-model=\"toggleSize\" @change=\"setLineWidth()\" mandatory>\r\n          <v-btn color=\"blue-grey lighten-5\">\r\n            <div class=\"small-circle\"></div>\r\n          </v-btn>\r\n          <v-btn color=\"blue-grey lighten-5\">\r\n            <div class=\"medium-circle\"></div>\r\n          </v-btn>\r\n          <v-btn color=\"blue-grey lighten-5\">\r\n            <div class=\"large-circle\"></div>\r\n          </v-btn>\r\n        </v-btn-toggle>\r\n\r\n        <br>\r\n\r\n        <v-btn @click.stop=\"clearDialog = true\" color=\"green lighten-3\" dark>\r\n          全消し\r\n        </v-btn>\r\n\r\n        <v-dialog v-model=\"clearDialog\" max-width=\"300\">\r\n          <v-card>\r\n            <v-card-title class=\"headline\">キャンバスの絵を消してもよいですか？</v-card-title>\r\n            <v-card-text>\r\n              ※一度消すと、元には戻りません\r\n            </v-card-text>\r\n            <v-card-actions>\r\n              <v-spacer></v-spacer>\r\n              <v-btn\r\n                color=\"green\"\r\n                text\r\n                @click=\"clearDialog = false\"\r\n              >\r\n                キャンセル\r\n              </v-btn>\r\n              <v-btn\r\n                color=\"green\"\r\n                text\r\n                @click=\"canvasClear()\"\r\n              >\r\n                全部消す\r\n              </v-btn>\r\n            </v-card-actions>\r\n          </v-card>\r\n        </v-dialog>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      canvas: null,\r\n      ctx: null,\r\n      canvasWidth: 800,\r\n      canvasHeight: 450,\r\n      pencilColor: '',\r\n      eraserColor: '#FFFFFF',\r\n      lineWidth: 1,\r\n      toggleSize: 0,\r\n      togglePencil: 0,\r\n      prev: [],\r\n      drawing: false,\r\n      timeSinceLastSend: null,\r\n      messageChannel: null,\r\n      clearDialog: false\r\n    }\r\n  },\r\n  mounted() {\r\n    this.canvas = document.getElementById(\"paper\")\r\n    this.ctx = this.canvas.getContext('2d')\r\n    this.timeSinceLastSend = new Date().getTime()\r\n  },\r\n  created(){\r\n    this.$axios.defaults.headers.common['Authorization'] = \"Token \" + this.token;\r\n  },\r\n  computed: {\r\n    userid(){\r\n      return this.$store.getters['auth/getUserId']\r\n    },\r\n    token(){\r\n      return this.$store.getters['auth/getToken']\r\n    },\r\n    color(){\r\n      if(this.togglePencil == 1){\r\n        return this.eraserColor\r\n      }else{\r\n        return this.pencilColor\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    start(e) {\r\n        e.preventDefault();\r\n        var x = e.layerX\r\n        var y = e.layerY\r\n        this.drawing = true\r\n        this.prev.x = x\r\n        this.prev.y = y\r\n    },\r\n    leave(e) {\r\n      this.drawing = false\r\n    },\r\n    move(e){\r\n      if(this.drawing && new Date().getTime() - this.timeSinceLastSend > 20){\r\n        var x = e.layerX\r\n        var y = e.layerY\r\n\r\n        if(x && y){\r\n          this.sendLine(this.$route.params['id'], this.userid, this.prev.x, this.prev.y, x, y, this.color, this.lineWidth)\r\n          this.drawLine(this.prev.x, this.prev.y, x, y, this.color, this.lineWidth)\r\n          this.timeSinceLastSend = new Date().getTime()\r\n          this.prev.x = x\r\n          this.prev.y = y\r\n        }\r\n      }\r\n    },\r\n    drawLine(fromx, fromy, tox, toy, color, width){\r\n      this.ctx.beginPath()\r\n      this.ctx.strokeStyle = color\r\n      this.ctx.lineWidth = width\r\n      this.ctx.moveTo(fromx, fromy)\r\n      this.ctx.lineTo(tox, toy)\r\n      this.ctx.stroke()\r\n    },\r\n    sendLine(room_id, user_id, fromx, fromy, tox, toy, color, width){\r\n      this.$axios.post('http://192.168.56.102:3000/api/v1/updateline', {\r\n        room_id: room_id,\r\n        user_id: user_id,\r\n        data: {\r\n          fromx: fromx,\r\n          fromy: fromy,\r\n          tox: tox,\r\n          toy: toy,\r\n          color: color,\r\n          width: width\r\n        }\r\n        //csrf_token: 'csrf_token here'\r\n      })\r\n      .then(response => {\r\n        //console.log(response)\r\n      })\r\n      .catch(error => {\r\n        //console.log(error)\r\n      });\r\n    },\r\n    setLineWidth(){\r\n      if(this.toggleSize == 0){\r\n        this.lineWidth = 1\r\n      }else if(this.toggleSize == 1){\r\n        this.lineWidth = 3\r\n      }else if(this.toggleSize == 2){\r\n        this.lineWidth = 5\r\n      }\r\n    },\r\n    canvasClear(){\r\n      this.clearDialog = false\r\n      this.drawLine(0, this.ctx.canvas.clientHeight / 2, this.ctx.canvas.clientWidth, this.ctx.canvas.clientHeight / 2, \"#FFFFFF\", this.ctx.canvas.clientHeight)\r\n      this.sendLine(this.$route.params['id'], this.userid,\r\n        0, this.ctx.canvas.clientHeight / 2, this.ctx.canvas.clientWidth, this.ctx.canvas.clientHeight / 2,\r\n        \"#FFFFFF\", this.ctx.canvas.clientHeight)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.draw-board{\r\n  overflow-y: auto;\r\n},\r\n#paper {\r\n  background-color: yellow;\r\n  margin-bottom: 1em;\r\n}\r\n.options-container{\r\n  display: flex;\r\n  position: relative;\r\n  margin: 2em;\r\n  padding: 1.2em 1em 1em;\r\n  width: 600px;\r\n  background-color: #fff; /*BOX背景色 */\r\n  border: 2px solid #8d93c8; /* 枠線の太さ・色 */\r\n  box-shadow: 2px 2px 2px #ccc; /* 影の色 */\r\n}\r\n.title-tab{\r\n  position: absolute;\r\n  display: inline-block;\r\n  top: -28px; /*タブ調整 */\r\n  left: -2px; /*タブ調整 */\r\n  padding: 1px 10px;\r\n  height: 26px;\r\n  font-weight: bold;\r\n  color: #fff; /* タイトル色 */\r\n  background-color: #8d93c8; /* タイトル背景色 */\r\n  border-radius: 8px 8px 0 0;\r\n}\r\n.color-picker{\r\n  margin: 0em 2.5em;\r\n}\r\n.right-options{\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n.size-text{\r\n  display: inline-block;\r\n  font-weight: bold;\r\n  color: #000; /* タイトル色 */\r\n}\r\n.small-circle{\r\n  width: 3px;\r\n  height: 3px;\r\n  border-radius: 50%;\r\n  background: black;\r\n}\r\n.medium-circle{\r\n  width: 5px;\r\n  height: 5px;\r\n  border-radius: 50%;\r\n  background: black;\r\n}\r\n.large-circle{\r\n  width: 10px;\r\n  height: 10px;\r\n  border-radius: 50%;\r\n  background: black;\r\n}\r\n</style>\r\n"]}]}