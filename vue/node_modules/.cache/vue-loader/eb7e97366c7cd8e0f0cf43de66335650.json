{"remainingRequest":"/home/centos/rails_v5.2.3/ChatC3/chat-c3/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/centos/rails_v5.2.3/ChatC3/chat-c3/src/components/StartChat.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/home/centos/rails_v5.2.3/ChatC3/chat-c3/src/components/StartChat.vue","mtime":1582727807034},{"path":"/home/centos/rails_v5.2.3/ChatC3/chat-c3/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/home/centos/rails_v5.2.3/ChatC3/chat-c3/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/centos/rails_v5.2.3/ChatC3/chat-c3/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/centos/rails_v5.2.3/ChatC3/chat-c3/node_modules/vuetify-loader/lib/loader.js","mtime":1564062719000},{"path":"/home/centos/rails_v5.2.3/ChatC3/chat-c3/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/centos/rails_v5.2.3/ChatC3/chat-c3/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n#container {\r\n  width: 100%;\r\n  height: 100%\r\n}\r\n#row {\r\n  width: 100%;\r\n  height: 100%\r\n}\r\n#col {\r\n  width: 100%;\r\n  height: 100%\r\n}\r\n",{"version":3,"sources":["StartChat.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"StartChat.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <v-content>\r\n    <v-container fluid id=\"container\">\r\n      <v-row no-gutters id=\"row\">\r\n        <v-card width=\"400\" class=\"mx-auto mb-auto\" color=\"green lighten-5\">\r\n          <v-card-title>知らない誰かと、チャットしよう</v-card-title>\r\n          <v-img  :src=\"image_name\"/>\r\n          <v-card-text>「チャット相手を探す」をクリックすると、知らない誰かとチャットが開始されます。\r\n          </v-card-text>\r\n          <v-card-actions justify-center>\r\n            <v-btn\r\n              class=\"ma-2\"\r\n              color=\"success\"\r\n              @click=\"findRoom\"\r\n            >\r\n              チャット相手を探す\r\n            </v-btn>\r\n          </v-card-actions>\r\n          <v-divider class=\"mx-4\"></v-divider>\r\n          <v-card-text>仲良くなった相手と、またチャットがしたいですか？<br>事前にアカウント登録をすれば「友達登録機能」が使用できます。友達とはいつでもチャットができるようになります。\r\n          </v-card-text>\r\n          <v-card-actions justify-center>\r\n            <v-btn\r\n              class=\"ma-2\"\r\n              color=\"teal lighten-4\"\r\n              to=\"/signup\"\r\n            >\r\n              アカウント登録を行う\r\n            </v-btn>\r\n          </v-card-actions>\r\n        </v-card>\r\n      </v-row>\r\n    </v-container>\r\n  </v-content>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'startchat',\r\n  data () {\r\n    return {\r\n      image_name: require(\"@/assets/people001.png\")\r\n    }\r\n  },\r\n  methods: {\r\n    findRoom(){\r\n      this.$axios.get('http://192.168.56.102:3000/api/v1/getRoom')\r\n      .then(response => {\r\n        if(response.data == null){\r\n          this.createRoom()\r\n        }else{\r\n          this.joinRoom(response.data.id)\r\n        }\r\n      })\r\n      .catch(error => {\r\n        console.log(error)\r\n      })\r\n    },\r\n    createRoom(){\r\n      this.$axios.post('http://192.168.56.102:3000/api/v1/rooms', {\r\n        room: {\r\n          status: 'Waiting'\r\n        }\r\n      })\r\n      .then(response => {\r\n        if(response.data != null){\r\n          this.joinRoom(response.data.id)\r\n        }\r\n      })\r\n      .catch(error => {\r\n        console.log(error)\r\n      })\r\n    },\r\n    joinRoom(roomId){\r\n        this.$axios.post('http://192.168.56.102:3000/api/v1/setRoomId', {\r\n          user_id: this.$store.getters['auth/getUserId'],\r\n          room_id: roomId\r\n        })\r\n        .then(response => {\r\n          this.$store.dispatch('auth/getRoomId', roomId)\r\n          .then(\r\n            response => {\r\n              this.$router.push('/chatroom/' + roomId)\r\n            }\r\n          )\r\n          .catch(\r\n            error => {\r\n              console.log(error)\r\n            }\r\n          )\r\n        })\r\n        .catch(error => {\r\n          console.log(error)\r\n        })\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n#container {\r\n  width: 100%;\r\n  height: 100%\r\n}\r\n#row {\r\n  width: 100%;\r\n  height: 100%\r\n}\r\n#col {\r\n  width: 100%;\r\n  height: 100%\r\n}\r\n</style>\r\n"]}]}