{"remainingRequest":"/home/centos/rails_v5.2.3/ChatC3/chat-c3/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/centos/rails_v5.2.3/ChatC3/chat-c3/src/components/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/centos/rails_v5.2.3/ChatC3/chat-c3/src/components/Login.vue","mtime":1569765383469},{"path":"/home/centos/rails_v5.2.3/ChatC3/chat-c3/node_modules/vuetify-loader/lib/loader.js","mtime":1564062719000},{"path":"/home/centos/rails_v5.2.3/ChatC3/chat-c3/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/centos/rails_v5.2.3/ChatC3/chat-c3/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport Vue from 'vue'\r\nimport Axios from 'axios'\r\nimport VueAxios from 'vue-axios'\r\n\r\nconst axios = Axios\r\nVue.prototype.$axios = axios\r\n\r\nVue.use(VueAxios, Axios)\r\n\r\nexport default {\r\n  name: 'login',\r\n  data () {\r\n    return {\r\n      user_id: 'aiueoaiueo',\r\n      password: 'aaaaaaaa',\r\n      showPassword: false,\r\n      rules: {\r\n        required: v => !!v || '必須入力です',\r\n        passwordLength: v => (v.length <= 16 && v.length >= 8) || 'パスワードは8～16文字の間です',\r\n        userIdLength: v => (v.length <= 16 && v.length >= 8) || 'ユーザーIDは8～16文字の間です',\r\n        isHalfWidth: v => this.isHalfWidth(v) || '使用できるのは半角英数字のみです',\r\n      },\r\n      user_info: {\r\n        user_id: this.user_id,\r\n        password: this.password,\r\n      },\r\n      alert_data: {\r\n        message: '',\r\n        type: null,\r\n      },\r\n    }\r\n  },\r\n  mounted(){\r\n    this.updateUserInfo()\r\n  },\r\n  methods: {\r\n    isHalfWidth(str) {\r\n      str = (str==null)? \"\":str\r\n      if(str.match(/^[A-Za-z0-9]*$/)){\r\n        return true\r\n      }else{\r\n        return false\r\n      }\r\n    },\r\n    loginUser(){\r\n      if(this.$refs.form.validate()){\r\n        this.updateUserInfo()\r\n\r\n        this.$store.dispatch('auth/login', this.user_info)\r\n        .then(response => this.loginSuccessful(response))\r\n        .catch(error => this.loginFailed(error))\r\n      }\r\n    },\r\n    updateUserInfo(){\r\n      this.user_info.user_id = this.user_id\r\n      this.user_info.password = this.password\r\n    },\r\n    showAlert(message, type){\r\n      this.alert_data.message = message\r\n      this.alert_data.type = type\r\n    },\r\n    loginSuccessful(response){\r\n      this.showAlert('ログイン成功', 'success')\r\n      if(this.$store.getters['auth/isLogin'] === true){\r\n        this.$router.push('/startchat')\r\n      }\r\n    },\r\n    loginFailed(error){\r\n      this.showAlert(error.response.data, 'error')\r\n    },\r\n  },\r\n}\r\n",{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <v-content>\r\n    <v-container fluid id=\"container\">\r\n      <v-row no-gutters id=\"row\">\r\n        <v-card width=\"600\" class=\"mx-auto mb-auto\" color=\"green lighten-5\">\r\n          <v-card-title>ログイン</v-card-title>\r\n          <v-alert :color=\"alert_data.type\" v-if=\"alert_data.type\">\r\n              {{ alert_data.message }}\r\n          </v-alert>\r\n          <v-form class=\"signup_form ml-10 mb-10\" ref=\"form\">\r\n            <v-text-field\r\n              v-model=\"user_id\"\r\n              label=\"*ユーザーID 半角英数字 8～16文字\"\r\n              :rules=\"[rules.required, rules.userIdLength, rules.isHalfWidth]\"\r\n            ></v-text-field>\r\n            <v-text-field\r\n              v-model=\"password\"\r\n              :type=\"showPassword ? 'text' : 'password'\"\r\n              label=\"*パスワード 半角英数字 8～16文字\"\r\n              :append-icon=\"showPassword ? 'mdi-eye' : 'mdi-eye-off'\"\r\n              :rules=\"[rules.required, rules.passwordLength, rules.isHalfWidth]\"\r\n              @click:append=\"showPassword = !showPassword\"\r\n            ></v-text-field>\r\n            <v-btn\r\n              class=\"mt-5\"\r\n              color=\"teal lighten-4\"\r\n              @click=\"loginUser\"\r\n            >\r\n              ログイン\r\n            </v-btn>\r\n          </v-form>\r\n        </v-card>\r\n      </v-row>\r\n    </v-container>\r\n  </v-content>\r\n</template>\r\n\r\n<script>\r\nimport Vue from 'vue'\r\nimport Axios from 'axios'\r\nimport VueAxios from 'vue-axios'\r\n\r\nconst axios = Axios\r\nVue.prototype.$axios = axios\r\n\r\nVue.use(VueAxios, Axios)\r\n\r\nexport default {\r\n  name: 'login',\r\n  data () {\r\n    return {\r\n      user_id: 'aiueoaiueo',\r\n      password: 'aaaaaaaa',\r\n      showPassword: false,\r\n      rules: {\r\n        required: v => !!v || '必須入力です',\r\n        passwordLength: v => (v.length <= 16 && v.length >= 8) || 'パスワードは8～16文字の間です',\r\n        userIdLength: v => (v.length <= 16 && v.length >= 8) || 'ユーザーIDは8～16文字の間です',\r\n        isHalfWidth: v => this.isHalfWidth(v) || '使用できるのは半角英数字のみです',\r\n      },\r\n      user_info: {\r\n        user_id: this.user_id,\r\n        password: this.password,\r\n      },\r\n      alert_data: {\r\n        message: '',\r\n        type: null,\r\n      },\r\n    }\r\n  },\r\n  mounted(){\r\n    this.updateUserInfo()\r\n  },\r\n  methods: {\r\n    isHalfWidth(str) {\r\n      str = (str==null)? \"\":str\r\n      if(str.match(/^[A-Za-z0-9]*$/)){\r\n        return true\r\n      }else{\r\n        return false\r\n      }\r\n    },\r\n    loginUser(){\r\n      if(this.$refs.form.validate()){\r\n        this.updateUserInfo()\r\n\r\n        this.$store.dispatch('auth/login', this.user_info)\r\n        .then(response => this.loginSuccessful(response))\r\n        .catch(error => this.loginFailed(error))\r\n      }\r\n    },\r\n    updateUserInfo(){\r\n      this.user_info.user_id = this.user_id\r\n      this.user_info.password = this.password\r\n    },\r\n    showAlert(message, type){\r\n      this.alert_data.message = message\r\n      this.alert_data.type = type\r\n    },\r\n    loginSuccessful(response){\r\n      this.showAlert('ログイン成功', 'success')\r\n      if(this.$store.getters['auth/isLogin'] === true){\r\n        this.$router.push('/startchat')\r\n      }\r\n    },\r\n    loginFailed(error){\r\n      this.showAlert(error.response.data, 'error')\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style>\r\n#container {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n#row {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n#col {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n.signup_form{\r\n  width: 400px;\r\n}\r\n</style>\r\n"]}]}